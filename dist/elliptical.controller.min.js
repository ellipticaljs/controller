!function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical=e.elliptical||{},e.elliptical.Controller=t(e.elliptical.utils),e.returnExports=e.elliptical.Controller)}(this,function(e){function t(e,t,o,l,n){var a;for(var c in t)if(t.hasOwnProperty(c)){var p=i.clone(e);if("Index"!==c||r(p[0])){var u=c.replace(/_/g,"-");p[0]=p[0].replace(/@action/g,u)}else p[0]=p[0].replace(/@action/g,"");a=p[0].length,"home"!==n.toLowerCase()&&(p[0]=a>1?"/"+n+p[0]:"/"+n),t[c].__name=n,t[c].__action=c,p.push(t[c]),l[o.toLowerCase()].apply(l,p)}}function r(e){var t=e.split("@action");return t[1]&&t[1].length>1}var o,i=e.array;return o=function(e,r){return this.app=e,this.name=r,function(o,i){var l=[].slice.call(arguments),n=l[0];if("string"!=typeof n)throw"Controller requires a route string with an '@action' placeholder  as the first parameter";var a=l.pop();if("object"!=typeof a)throw"Controller requires the last function parameter to be an object";a.Get||a.Post||a.Put||a.Delete?["Get","Post","Put","Delete"].forEach(function(o){if(a[o]&&"function"==typeof a[o])throw"Controller requires an @action param";t(l,a[o],o,e,r)}):t(l,a,"get",e,r)}}});